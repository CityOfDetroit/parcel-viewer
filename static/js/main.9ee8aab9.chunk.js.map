{"version":3,"sources":["img/logo.png","img/video.png","components/HeaderButton.js","components/AddressSearch.js","components/SectionH3.js","components/DetailsTable.js","components/Details.js","components/Header.js","components/Introduction.js","components/MapHeader.js","components/Map.js","components/StreetView.js","ParcelExplorer.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","HeaderButton","icon","onClick","active","className","style","color","AddressSearch","setCoords","setSearch","setParcel","useState","dataSource","setDataSource","value","setValue","hasFocus","setHasFocus","searchField","setSearchField","GEOCODER","useHistory","handleSearch","fetch","then","r","json","d","suggestions","length","text","map","s","suggestAddress","console","log","onChange","e","target","onKeyDown","keyCode","url","candidates","attributes","location","onSearchSelect","onFocus","onBlur","faWindowClose","SectionH3","children","DetailsTable","parcelData","parcelApiData","mobile","taxpayer_1","taxpayer2","taxpayer_2","taxpayer_street","taxpayer_city","taxpayer_state","taxpayer_zip","saledate","moment","sale_date","format","parseInt","sale_price","toLocaleString","homestead_pre","nez","property_class","property_class_desc","use_code","use_code_desc","zoning","num_bldgs","totalfloor","total_floor_area","tax_status","assessed_value","total_acreage","total_square_footage","depth","frontage","legal_description","Details","parcel","setParcelData","setLoadScreen","useEffect","params","outFields","outSR","f","where","queryString","Object","keys","k","encodeURIComponent","join","fetchData","response","features","geojson","parse","geometry","coordinates","centroid","coords","y","x","position","top","parcel_number","address","Header","showSearch","showInfo","setInfo","showSv","setSv","showSatellite","setSatellite","src","logo","faInfoCircle","faSearch","faStreetView","faGlobe","IntroPara","Introduction","faMapMarked","faCalendarAlt","href","MapTitle","MapTitleSection","Map","width","height","svCoords","svBearing","theMap","setTheMap","history","xRandomOffset","Math","random","yRandomOffset","xRandomCenter","yRandomCenter","mapboxgl","container","satMapStyle","mapStyle","center","zoom","addControl","NavigationControl","showCompass","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","resize","on","results","queryRenderedFeatures","point","layers","currentParcel","parcels","p","properties","parcel_id","currentIndex","findIndex","candidateParcel","nextParcel","push","loadImage","videoIcon","error","image","addImage","setFilter","getSource","setData","type","lon","lat","bearing","setStyle","panTo","setLayoutProperty","id","clientid","fetchImageKey","lnglat","lng","markerStyle","ballColor","ballOpacity","opacity","interactive","radius","StreetView","setSvBearing","setSvCoords","mapillary","setMapillary","loading","setLoading","currentCoords","setCurrentCoords","currentKey","setCurrentKey","imageKeys","setImageKeys","mapillaryView","Mapillary","component","cover","marker","sequence","cache","attribution","n","latLon","b","sequences","forEach","ik","captured_at","slice","indexOf","sorted","sort","a","moveToKey","key","node","mly","start","end","fullPano","nodeBearing","computedCA","desiredBearing","min","max","interval","wrap","bearingToBasic","setCenter","setBearing","defaultMarker","SimpleMarker","getComponent","add","filter","i","SidebarFooter","gridArea","faGithub","ParcelExplorer","pid","useParams","window","innerWidth","setWidth","innerHeight","setHeight","setMobile","handleWindowResize","addEventListener","removeEventListener","App","basename","debug","path","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9ee8aab9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.c5600d7e.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABmJLR0QA/wD/AP+gvaeTAAAAyElEQVQ4je3Uv2rCYBSG8Z+ZRMeCzm7q0qIXUARvyandejneQqF2rXuCo4vUQQcxOHRIhyYgIeKf1ElfOJzh5Xs4fMPDPWkq6e7iFY+oHnmzxgRv2BT0LTxBHzskZ06IWg7axTd+4OMCaDajAmjW2ZYAjw9AkwD1oo88MXW08Y7mflHJzr4wER7QyBdlwQcTXAN6m+AQy2uA53jGoggclwDHmGEod3mAaQnwV7ojDPLwnv+TUEcqoX1tvvjT3TFtrvDpBG3eA34BrIhd+y4+5nkAAAAASUVORK5CYII=\"","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\n\nexport const HeaderButton = ({ icon, onClick, active=false }) => (\n  <button className={`text-lg hover:bg-gray-400 py-2 px-3 rounded inline-flex items-center`} onClick={onClick}>\n    <FontAwesomeIcon icon={icon} style={active ? {color: 'black'} : {color: 'rgba(0,0,0,0.25)'}}/>\n  </button>\n);\n","import { faExchangeAlt, faSearch, faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { HeaderButton } from \"./HeaderButton\";\n\nfunction AddressSearch({ setCoords, setSearch, setParcel }) {\n  const [dataSource, setDataSource] = useState([]);\n  const [value, setValue] = useState(\"\");\n  const [hasFocus, setHasFocus] = useState(false);\n  const [searchField, setSearchField] = useState(\"address\");\n  let history = useHistory();\n\n  const GEOCODER = `https://opengis.detroitmi.gov/opengis/rest/services/BaseUnits/BaseUnitGeocoder/GeocodeServer`\n\n  const suggestAddress = (value) => {\n    if (value !== \"\") {\n      fetch(`${GEOCODER}/suggest?text=${value}&f=pjson`)\n        .then((r) => r.json())\n        .then((d) => {\n          d.suggestions.length < 1 ? setDataSource({ text: value }) : setDataSource(d.suggestions.map((s) => s.text));\n        });\n    }\n  };\n\n  const handleSearch = (value) => {\n    suggestAddress(value);\n    setValue(value);\n    console.log(dataSource)\n  };\n\n  const onSearchSelect = (value) => {\n    const url = `${GEOCODER}/findAddressCandidates?SingleLine=${value}&outSR=4326&outFields=*&f=pjson`;\n    fetch(url)\n      .then((r) => r.json())\n      .then((d) => {\n        if (d.candidates.length > 0) {\n          let { attributes, location } = d.candidates[0];\n          if (attributes[\"parcel_id\"]) {\n            setParcel(attributes[\"parcel_id\"]);\n          } else {\n            console.log(\"not found!\");\n            setParcel(null);\n          }\n          setCoords(location);\n        }\n      });\n  };\n\n  return (\n    <section className={hasFocus ? `address-search py-2 px-2 bg-det-gray rounded w-full text-gray-900` : `address-search py-2 px-2 bg-det-gray rounded w-full text-gray-600`}>\n\n      <div className=\"flex items-center\">\n        <input\n          className=\"bg-white mb-2 focus:outline-none font-lg p-1 focus:shadow-outline border border-gray-300 rounded-lg block w-full appearance-none leading-normal\"\n          onChange={(e) => (searchField === \"address\" ? handleSearch(e.target.value) : setParcel(null))}\n          onKeyDown={(e) => e.keyCode === 13 && (searchField === \"address\" ? onSearchSelect(value) : setParcel(e.target.value)\n          )}\n          onFocus={(e) => {\n            console.log(e);\n            setHasFocus(true);\n          }}\n          onBlur={(e) => {\n            console.log(e);\n            setHasFocus(false);\n          }}\n        ></input>\n                <HeaderButton\n          icon={faWindowClose}\n          onClick={() => { setSearch(false)\n          \n          }}\n          className=\"ml-2\"\n          />\n      </div>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n        <label className={`inline-block text-sm flex items-center mr-2`}>Search by:</label>\n        <select onChange={(e) => setSearchField(e.target.value)}>\n          <option value=\"address\" className=\"p-2\">address</option>\n          <option value=\"parcel ID\">Parcel ID</option>\n        </select> \n       </div>\n      </div>\n    </section>\n  );\n}\n\nexport default AddressSearch;\n","import React from \"react\";\n\nconst SectionH3 = ({ children }) => {\n  return <h3 className=\"font-normal\">{children}</h3>;\n};\n\nexport default SectionH3;\n","import moment from \"moment\";\nimport React from \"react\";\n\nimport SectionH3 from \"./SectionH3\";\n\nfunction DetailsTable({ parcelData, parcelApiData, mobile }) {\n  let d = parcelData;\n\n  console.log(d)\n  return (\n    <section className=\"w-full overflow-y-auto px-1 details-table\">\n      <section className=\"details-section\">\n        <SectionH3>Ownership</SectionH3>\n        <table className=\"parcel-details\">\n          <tbody>\n            <tr>\n              <td>Taxpayer</td>\n              <td>{d.taxpayer_1}</td>\n            </tr>\n            {d.taxpayer2 && (\n              <tr>\n                <td>Taxpayer (extended)</td>\n                <td>{d.taxpayer_2}</td>\n              </tr>\n            )}\n            <tr>\n              <td>Taxpayer Address</td>\n              <td>{`${d.taxpayer_street}, ${d.taxpayer_city}, ${d.taxpayer_state}, ${d.taxpayer_zip}`}</td>\n            </tr>\n            {d.saledate && (\n              <tr>\n                <td>Last Sale Date</td>\n                <td>{moment(d.sale_date).format(\"LL\")}</td>\n              </tr>\n            )}\n            {d.saledate && (\n              <tr>\n                <td>Last Sale Price</td>\n                <td>{`$${parseInt(d.sale_price).toLocaleString()}`}</td>\n              </tr>\n            )}\n            <tr>\n              <td>PRE %</td>\n              <td>{d.homestead_pre}</td>\n            </tr>\n            {d.nez !== \"\" && (\n              <tr>\n                <td>NEZ</td>\n                <td>{d.nez}</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </section>\n      <section className=\"details-section\">\n        <SectionH3>Usage & classification</SectionH3>\n        <table className=\"parcel-details\">\n          <tbody>\n            {/* <tr>\n              <td>\n                Improved?\n              </td>\n              <td>\n                {d.is_improved === 1 ? `Yes` : `No`}\n              </td>\n            </tr> */}\n            <tr>\n              <td>Property Class</td>\n              <td>\n                {d.property_class} - {d.property_class_desc}\n              </td>\n            </tr>\n            <tr>\n              <td>Property Use</td>\n              <td>\n                {d.use_code} - {d.use_code_desc}\n              </td>\n            </tr>\n            <tr>\n              <td>Zoning</td>\n              <td>{d.zoning}</td>\n            </tr>\n            <tr>\n              <td># of Buildings</td>\n              <td>{d.num_bldgs}</td>\n            </tr>\n            {d.totalfloor && (\n              <tr>\n                <td>Total Floor Area (sf)</td>\n                <td>{d.total_floor_area}</td>\n              </tr>\n            )}\n            {d.style && (\n              <tr>\n                <td>Style</td>\n                <td>{d.style}</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </section>\n      <section className=\"details-section\">\n        <SectionH3>Taxation</SectionH3>\n        <table className=\"parcel-details\">\n          <tbody>\n            <tr>\n              <td>Tax Status</td>\n              <td>{d.tax_status}</td>\n            </tr>\n            <tr>\n              <td>Assessed Value</td>\n              <td>{`$${parseInt(d.assessed_value).toLocaleString()}`}</td>\n            </tr>\n            <tr>\n              <td>Taxable Value</td>\n              <td>{`$${parseInt(d.assessed_value).toLocaleString()}`}</td>\n            </tr>\n          </tbody>\n        </table>\n      </section>\n      <section className=\"details-section\">\n        <SectionH3>Dimensions</SectionH3>\n        <table className=\"parcel-details\">\n          <tbody>\n            <tr>\n              <td>Total Acreage</td>\n              <td>{d.total_acreage} ac</td>\n            </tr>\n            <tr>\n              <td>Total Square Footage</td>\n              <td>{d.total_square_footage} sf</td>\n            </tr>\n            <tr>\n              <td>Depth x Frontage (ft)</td>\n              <td>\n                {d.depth} x {d.frontage}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </section>\n      <section className=\"details-section\">\n        <SectionH3>Legal description</SectionH3>\n        <p className=\"mt-2 max-w-8 bg-det-gray px-4 py-2 font-mono text-sm leading-4\">{d.legal_description}</p>\n      </section>\n    </section>\n  );\n}\n\nexport default DetailsTable;\n","import centroid from \"@turf/centroid\";\nimport React, { useEffect, useState } from \"react\";\nimport { convert, parse } from \"terraformer-arcgis-parser\";\n\nimport DetailsTable from \"./DetailsTable\";\nimport SectionH3 from \"./SectionH3\";\n\nconst Details = ({ parcel, setCoords, mobile, children }) => {\n  let [parcelData, setParcelData] = useState(null);\n  let [parcelApiData, setParcelApiData] = useState(null);\n  const [loadScreen, setLoadScreen] = useState(false);\n\n  // function to fetch data; returns a fetch Promise\n  const fetchData = (parcel) => {\n    // object to hold URL query string parameters\n    let params = {\n      outFields: \"*\",\n      outSR: 4326,\n      f: \"json\",\n      where: `parcel_number='${parcel}'`,\n    };\n\n    // service URL for parcel layer\n    let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Parcels_Current/FeatureServer/0/query?`;\n\n    // loop through params keys, make URI encoded string, join with &s\n    let queryString = Object.keys(params)\n      .map((k) => `${k}=${encodeURIComponent(params[k])}`)\n      .join(\"&\");\n\n    return fetch(url + queryString);\n  };\n\n  useEffect(() => {\n    setLoadScreen(true);\n    fetchData(parcel)\n      .then((response) => response.json())\n      .then((d) => {\n            if(d.features.length > 0) {\n              let geojson = parse(d.features[0].geometry);\n              let coordinates = centroid(geojson).geometry.coordinates;\n              let coords = {\n                y: coordinates[1],\n                x: coordinates[0],\n              };\n              setCoords(coords);\n              console.log(\"Selected parcel: \", d.features[0]);\n              setParcelData(d.features[0]);\n              setLoadScreen(false);\n            }\n            else {\n              console.log('Parcel not found')\n              setParcelData(null)\n              setLoadScreen(false)\n            }\n          })\n  }, [parcel]);\n\n  return (\n    <section className={`m-1`}>\n      {parcelData ? (\n        <>\n            <table className=\"bg-det-gray mb-1\" style={{ position: 'sticky', top: 0}}>\n              <thead>\n                <tr className=\"\">\n                  <td>Parcel ID: {parcelData.attributes.parcel_number}</td>\n                  <td>\n                    Address: <b>{parcelData.attributes.address}</b>\n                  </td>\n                </tr>\n              </thead>\n            </table>\n          <DetailsTable parcelData={parcelData.attributes} parcelApiData={parcelApiData} mobile={mobile} />\n        </>\n      ) : (\n        <>\n        <div className=\"p-2 text-lg\">\n          We couldn't find information for this parcel: {parcel}\n        </div>\n        {children}\n        </>\n      )}\n    </section>\n  );\n};\n\nexport default Details;\n","import React from \"react\";\n\nimport logo from \"../img/logo.png\";\nimport {HeaderButton} from './HeaderButton';\nimport { faGlobe, faInfoCircle, faSearch, faStreetView } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Header = ({ showSearch, setSearch, showInfo, setInfo, showSv, setSv, showSatellite, setSatellite, mobile, children }) => {\n  return (\n    <header>\n      <div className=\"flex items-center mx-1 mb-1\">\n        <img src={logo} className=\"h-12\" />\n        <h1 className=\"text-xl w-full ml-2\">Parcel Viewer</h1>\n      </div>\n      <div className=\"flex items-center justify-end mb-1\">\n        <HeaderButton icon={faInfoCircle} active={showInfo} onClick={() => {setInfo(!showInfo)}}/>\n        <HeaderButton icon={faSearch} active={showSearch} onClick={() => {setSearch(!showSearch)}}/>\n        <HeaderButton icon={faStreetView} active={showSv} onClick={() => {setSv(!showSv)}}/>\n        <HeaderButton icon={faGlobe} active={showSatellite} onClick={() => {setSatellite(!showSatellite)}}/>\n      </div>\n      {/* {mobile &&\n        <div className=\"flex items-center mr-3\">\n          <img src={logo} className=\"h-12\" />\n          <h1 className=\"text-xl w-full mx-2\">Parcel Viewer</h1>\n          <HeaderButton icon={faInfoCircle} active={showInfo} onClick={() => {setInfo(!showInfo)}}/>\n          <HeaderButton icon={faSearch} active={showSearch} onClick={() => {setSearch(!showSearch)}}/>\n        </div>\n      } */}\n      <section className=\"pl-1 panels-area\">\n        {children}\n      </section>\n    </header>\n  );\n};\nexport default Header;\n","import { faCalendarAlt, faGlobe, faMapMarked, faStreetView, faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\n\nimport { HeaderButton } from \"./HeaderButton\";\n\nconst IntroPara = ({ children }) => {\n  return <p className=\"py-2 text-sm\">{children}</p>;\n};\n\nconst Introduction = ({ setInfo, showInfo }) => {\n  return (\n    <section className=\"details introduction px-2 py-2 bg-det-gray bg-opacity-50 rounded overflow-y-auto\">\n      <div className=\"flex items-center align-top justify-between\">\n        <h1 className=\"text-lg\">Welcome to the new Parcel Viewer</h1>\n        <HeaderButton\n          icon={faWindowClose}\n          onClick={() => {\n            setInfo(!showInfo)\n          }}\n        />\n      </div>\n      <IntroPara>You can use this application to look up information about parcels in the City of Detroit.</IntroPara>\n      <IntroPara>You can find information about parcels in two ways:</IntroPara>\n      <ul className=\"list-disc list-inside ml-2 py-2 text-sm\">\n        <li>\n          <b>Search</b>\n          <FontAwesomeIcon icon={faSearch} className=\"mx-2\" />\n          for an address or parcel ID using the search box above\n        </li>\n        <li>\n          Click a parcel on the <b>map</b>\n          <FontAwesomeIcon icon={faMapMarked} className=\"mx-2\" />\n        </li>\n      </ul>\n      <IntroPara>\n        You can see the latest <b>Street View</b>\n        <FontAwesomeIcon icon={faStreetView} className=\"mx-2\" />\n        imagery for the parcel you selected:\n      </IntroPara>\n      <ul className=\"list-disc list-inside ml-2 py-2 text-sm\">\n        <li>\n          Switch between different imagery <b>capture dates</b>\n          <FontAwesomeIcon icon={faCalendarAlt} className=\"mx-2\" />\n          using the date picker\n        </li>\n      </ul>\n      <IntroPara>\n        You can also switch the map baselayer to <b>satellite imagery</b>\n        <FontAwesomeIcon icon={faGlobe} className=\"mx-2\" />\n      </IntroPara>\n      <IntroPara>Do you have questions or comments about this tool? Tell us using our \n      {\" \"}<a href=\"https://airtable.com/shrInZsfyRoJvq8GJ\" className=\"underline text-gray-700 hover:text-blue-600\">feedback form</a> or please open a <a href=\"https://github.com/CityOfDetroit/parcel-viewer/issues\" className=\"underline text-gray-700 hover:text-blue-600\">GitHub issue</a>.</IntroPara>\n    </section>\n  );\n};\n\nexport default Introduction;\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\n\nconst MapTitle = ({ icon, children }) => (\n  <div className=\"flex items-center mr-2\">\n    <FontAwesomeIcon icon={icon} className=\"mx-2 text-md\" />\n    <h2 className=\"border-none font-light text-md\">{children}</h2>\n  </div>\n);\n\nconst MapTitleSection = ({ children }) => (\n  <div className=\"bg-det-light-green flex items-center py-1 px-1 justify-between z-40 absolute w-full leading-none\">{children}</div>\n);\n\nexport { MapTitleSection, MapTitle };\n","import { faExchangeAlt, faMapMarked } from \"@fortawesome/free-solid-svg-icons\";\nimport mapboxgl from \"mapbox-gl\";\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport mapStyle from '../style.json'\nimport satMapStyle from '../satstyle.json'\nimport videoIcon from '../img/video.png'\n\nimport { MapTitle, MapTitleSection } from \"./MapHeader\";\n\nconst Map = ({ parcel, setParcel, coords, width, height, children, svCoords, svBearing, showSv, showSatellite }) => {\n  const [theMap, setTheMap] = useState(null);\n  let history = useHistory();\n\n  let [xMin, yMin, xMax, yMax] = [-83.237803,42.355192,-82.910451,42.45023];\n  let xRandomOffset = (xMax - xMin) * Math.random()\n  let yRandomOffset = (yMax - yMin) * Math.random()\n  let xRandomCenter = xMin + xRandomOffset\n  let yRandomCenter = yMin + yRandomOffset\n\n  useEffect(() => {\n    var map = new mapboxgl.Map({\n      container: \"map\", // container id\n      style: showSatellite ? satMapStyle : mapStyle, // stylesheet location\n      center: coords ? [coords.y, coords.x] : [xRandomCenter, yRandomCenter], // starting position [lng, lat]\n      zoom: 16.25, // starting zoom\n    });\n\n    map.addControl(\n      new mapboxgl.NavigationControl({\n        showCompass: false\n      }),\n      \"bottom-left\"\n    );\n\n    // Add geolocate control to the map.\nmap.addControl(\n  new mapboxgl.GeolocateControl({\n  positionOptions: {\n  enableHighAccuracy: true\n  },\n  trackUserLocation: true\n  }), 'bottom-left'\n  );\n    map.resize();\n\n    map.on(\"load\", () => {\n      setTheMap(map);\n      map.on(\"click\", \"parcels-fill\", function (e) {\n        let results = map.queryRenderedFeatures(e.point, {\n          layers: [\"parcels-fill\"],\n        });\n        console.log(results)\n\n        // Subsequent clicks on the same shape cycle between overlapping parcels.\n        setParcel((currentParcel) => {\n          const parcels = results.map((p) => p.properties.parcel_id)\n          const currentIndex = parcels.findIndex((candidateParcel) =>\n            candidateParcel === currentParcel\n          );\n          const nextIndex = (currentIndex + 1) % results.length;\n          const nextParcel = parcels[nextIndex];\n\n          history.push(`/${nextParcel}/`);\n          return nextParcel;\n        });\n\n        // setCoords(e.lngLat);\n      });\n\n\n    });\n\n    map.on('style.load', () => {\n      map.loadImage(videoIcon, (error, image) => {\n        if (error) throw error;\n        map.addImage(\"video\", image);\n        map.setFilter(\"parcels-highlight\", [\"==\", \"parcel_id\", parcel ? parcel : \"\"]);\n        svCoords && map.getSource(\"mapillary\").setData({\n          type: \"FeatureCollection\",\n          // we'll make the map data here\n          features: [\n            {\n              type: \"Feature\",\n              geometry: {\n                type: \"Point\",\n                coordinates: [svCoords.lon, svCoords.lat],\n              },\n              properties: {\n                bearing: svBearing - 90,\n              },\n            },\n          ],\n        });\n      });    \n    })\n  }, []);\n\n  useEffect(() => {\n    if(theMap && showSatellite) {\n      theMap.setStyle(satMapStyle)\n    }\n    if(theMap && !showSatellite) {\n      theMap.setStyle(mapStyle)\n    };\n  }, [showSatellite])\n\n  //Highlight active parcel\n  useEffect(() => {\n    theMap && theMap.setFilter(\"parcels-highlight\", [\"==\", \"parcel_id\", parcel ? parcel : \"\"]);\n  }, [parcel, theMap]);\n\n  //Highlight active parcel\n  useEffect(() => {\n    theMap && coords && theMap.panTo([coords.x, coords.y]);\n  }, [coords, theMap]);\n\n  useEffect(() => {\n    theMap && theMap.resize();\n  }, [width, height]);\n\n\n  useEffect(() => {\n    if(theMap && showSv) {\n      theMap.setLayoutProperty(\"mapillary-location\", \"visibility\", \"visible\")\n    }\n    if(theMap && !showSv) {\n      theMap.setLayoutProperty(\"mapillary-location\", \"visibility\", \"none\")\n    }\n  }, [showSv])\n\n  useEffect(() => {\n    console.log(svCoords, svBearing);\n    theMap && showSv &&\n      theMap.getSource(\"mapillary\").setData({\n        type: \"FeatureCollection\",\n        // we'll make the map data here\n        features: [\n          {\n            type: \"Feature\",\n            geometry: {\n              type: \"Point\",\n              coordinates: [svCoords.lon, svCoords.lat],\n            },\n            properties: {\n              bearing: svBearing - 90,\n            },\n          },\n        ],\n      });\n    if(theMap && !showSv){\n      theMap.getSource(\"mapillary\").setData({\n        type: \"FeatureCollection\", features: []\n      })\n    }\n  }, [svCoords, svBearing]);\n\n  return (\n    <section id=\"map\" className={`map-view mx-1 mt-1 rounded`}>\n      <MapTitleSection>\n        <MapTitle icon={faMapMarked}>Map</MapTitle>\n        {children}\n      </MapTitleSection>\n    </section>\n  );\n};\n\nexport default Map;\n","import { faCalendar, faCalendarAlt, faStreetView } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport bearing from \"@turf/bearing\";\nimport * as Mapillary from \"mapillary-js\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { MapTitle, MapTitleSection } from \"./MapHeader\";\n\nlet clientid = \"bmZxVGc0ODVBVXhZVk5FTDdyeHlhZzowM2EyODU0Njc4OWY3ZGNi\";\n\n/**\n * Wrap a value on the interval [min, max].\n */\nfunction wrap(value, min, max) {\n  var interval = max - min;\n\n  while (value > max || value < min) {\n    if (value > max) {\n      value = value - interval;\n    } else if (value < min) {\n      value = value + interval;\n    }\n  }\n\n  return value;\n}\n\n/**\n * Convert a desired bearing to a basic X image coordinate for\n * a specific node bearing.\n *\n * Works only for a full 360 panorama.\n */\nfunction bearingToBasic(desiredBearing, nodeBearing) {\n  // 1. Take difference of desired bearing and node bearing in degrees.\n  // 2. Scale to basic coordinates.\n  // 3. Add 0.5 because node bearing corresponds to the center\n  //    of the image. See\n  //    https://mapillary.github.io/mapillary-js/classes/viewer.html\n  //    for explanation of the basic coordinate system of an image.\n  var basic = (desiredBearing - nodeBearing) / 360 + 0.5;\n\n  // Wrap to a valid basic coordinate (on the [0, 1] interval).\n  // Needed when difference between desired bearing and node\n  // bearing is more than 180 degrees.\n  return wrap(basic, 0, 1);\n}\n\n/**\n * Function to set the mapillary viewer's center by computing bearing\n */\nfunction setBearing(node, mly, start, end) {\n  if (!node.fullPano) {\n    // We are only interested in setting the bearing for full 360 panoramas.\n    return;\n  }\n  var nodeBearing = node.computedCA; // Computed node compass angle (equivalent\n  // to bearing) is used by mjs when placing\n  // the node in 3D space.\n\n  // compute this with @turf/bearing\n  var desiredBearing = bearing(start, end); // Your desired bearing.\n  var basicX = bearingToBasic(desiredBearing, nodeBearing);\n  var basicY = 0.45; // tilt slightly up\n\n  var center = [basicX, basicY];\n\n  mly.setCenter(center);\n}\n\n/**\n * Promise-returning function to fetch a new Mapillary imageKey based on some coordinates\n */\nconst fetchImageKey = (coords) => {\n  let lnglat;\n  if (coords.lng && coords.lat) {\n    lnglat = `${coords.lng},${coords.lat}`;\n  }\n  if (coords.x && coords.y) {\n    lnglat = `${coords.x},${coords.y}`;\n  }\n  let url = `https://a.mapillary.com/v3/images?client_id=${clientid}&closeto=${lnglat}&radius=80&usernames=codgis&start_time=2018-07-01`;\n  return fetch(url).then((r) => r.json());\n};\n\nlet markerStyle = {\n  ballColor: \"white\",\n  ballOpacity: 0.5,\n  color: \"#feb70d\",\n  opacity: 0.55,\n  interactive: false,\n  radius: 2,\n};\n\nconst StreetView = ({ coords, width, height, setSvBearing, setSvCoords, children }) => {\n  // local state to store the mapillary viewer\n  const [mapillary, setMapillary] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [currentCoords, setCurrentCoords] = useState(null);\n  const [currentKey, setCurrentKey] = useState(null);\n  const [imageKeys, setImageKeys] = useState(null);\n\n  // show full streetview on click of streetview button\n  useEffect(() => {\n    let mapillaryView = new Mapillary.Viewer(\"mly\", clientid, null, {\n      component: {\n        cover: true,\n        marker: true,\n        sequence: false,\n        cache: true,\n        attribution: false,\n        // direction: true\n      },\n    });\n\n    setMapillary(mapillaryView);\n\n    mapillaryView.on(\"nodechanged\", (n) => {\n      setSvCoords(n.latLon);\n    });\n\n    mapillaryView.on(\"bearingchanged\", (b) => {\n      setSvBearing(b);\n    });\n\n    if (coords !== currentCoords) {\n      setCurrentCoords(coords);\n      fetchImageKey(coords).then((d) => {\n        let sequences = [];\n        d.features.forEach((ik) => {\n          if (sequences.map((s) => s.properties.captured_at.slice(0, 10)).indexOf(ik.properties.captured_at.slice(0, 10)) === -1) {\n            sequences.push(ik);\n          }\n        });\n        let sorted = sequences.sort((a, b) => moment(a.properties.captured_at) - moment(b.properties.captured_at));\n        setImageKeys(sorted);\n        setCurrentKey(sorted[sorted.length - 1]);\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    setLoading(true);\n    mapillary &&\n      currentKey &&\n      mapillary.moveToKey(currentKey.properties.key).then((node) => {\n        setBearing(node, mapillary, currentKey.geometry.coordinates, [coords.lng || coords.x, coords.lat || coords.y]);\n        setLoading(false);\n      });\n  }, [currentKey, mapillary]);\n\n  useEffect(() => {\n    if (mapillary) {\n      setLoading(true);\n      setImageKeys(null);\n      let defaultMarker = new Mapillary.MarkerComponent.SimpleMarker(\"default-id\", { lat: coords.y, lon: coords.x }, markerStyle);\n      let markerComponent = mapillary.getComponent(\"marker\");\n      markerComponent.add([defaultMarker]);\n      fetchImageKey(coords).then((d) => {\n        let sequences = [];\n        d.features.forEach((ik) => {\n          if (sequences.map((s) => s.properties.captured_at.slice(0, 10)).indexOf(ik.properties.captured_at.slice(0, 10)) === -1) {\n            sequences.push(ik);\n          }\n        });\n        let sorted = sequences.sort((a, b) => moment(a.properties.captured_at) - moment(b.properties.captured_at));\n        setImageKeys(sorted);\n        setCurrentKey(sorted[sorted.length - 1]);\n      });\n    }\n  }, [coords, mapillary]);\n\n  useEffect(() => {\n    if (mapillary) {\n      mapillary.resize();\n    }\n  }, [width, height]);\n\n  return (\n    <section id=\"mly\" className=\"street-view mx-1 mt-1 rounded\">\n      <MapTitleSection>\n        <MapTitle icon={faStreetView}>{loading ? `Loading imagery...` : `Street view`}</MapTitle>\n        {imageKeys && currentKey && (\n          <div className=\"flex items-center\">\n            <FontAwesomeIcon icon={faCalendarAlt} className=\"text-md mr-2\" />\n            <select\n              className=\"block appearance-none text-xs mr-3 px-2 py-1 bg-det-gray border border-gray-200 text-gray-700 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n              value={moment(currentKey.properties.captured_at).format(\"ll\")}\n              onChange={(e) => {\n                setCurrentKey(imageKeys.filter((s) => moment(s.properties.captured_at).format(\"ll\") === e.target.value)[0]);\n              }}\n            >\n              {imageKeys.map((s, i) => (\n                <option key={s.properties.key}>{moment(s.properties.captured_at).format(\"ll\")}</option>\n              ))}\n            </select>\n            {children}\n          </div>\n        )}\n      </MapTitleSection>\n    </section>\n  );\n};\n\nexport default StreetView;\n","import \"./css/app.css\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport AddressSearch from \"./components/AddressSearch.js\";\nimport Details from \"./components/Details\";\nimport Header from \"./components/Header\";\nimport Introduction from \"./components/Introduction\";\nimport Map from \"./components/Map\";\nimport StreetView from \"./components/StreetView\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {faGithub} from '@fortawesome/free-brands-svg-icons'\n\nconst SidebarFooter = () => {\n  return (\n    <div className=\"px-2 flex justify-between items-center bg-det-gray text-sm\" style={{gridArea: 'f'}}>\n      <span>City of Detroit, 2020. <a href=\"https://airtable.com/shrInZsfyRoJvq8GJ\" className=\"underline text-gray-700 hover:text-blue-600\">feedback form</a></span>\n      <a href=\"https://www.github.com/CityOfDetroit/parcel-viewer/\"><FontAwesomeIcon icon={faGithub} /></a>\n    </div>\n  )\n}\n\nconst ParcelExplorer = () => {\n  // get the parcel ID from the URL\n  let { pid } = useParams();\n\n  // screen size hooks: we need to change behavior for mobile/etc\n  const breakpoint = 640;\n  const [width, setWidth] = useState(window.innerWidth);\n  const [height, setHeight] = useState(window.innerHeight);\n  const [mobile, setMobile] = useState(width < breakpoint);\n\n  // app state\n  const [parcel, setParcel] = useState(pid ? pid : null);\n  const [coords, setCoords] = useState(null);\n  const [map, setMap] = useState(true);\n  const [showSv, setSv] = useState(false);\n  const [svCoords, setSvCoords] = useState(null);\n  const [svBearing, setSvBearing] = useState(null);\n  const [showInfo, setInfo] = useState(mobile ? false : true)\n  const [showSearch, setSearch] = useState(mobile ? false : true)\n  const [showSatellite, setSatellite] = useState(true)\n\n  // Roll our own media-query hook:\n  useEffect(() => {\n    const handleWindowResize = () => {\n      setWidth(window.innerWidth);\n      setHeight(window.innerHeight);\n      setMobile(window.innerWidth < breakpoint);\n    };\n    window.addEventListener(\"resize\", handleWindowResize);\n    return () => window.removeEventListener(\"resize\", handleWindowResize);\n  }, []);\n\n  return (\n    <div className={!mobile ? \"App\" : \"MobileApp\"}>\n      <Header {...{setSearch, showSearch, showInfo, setInfo, setParcel, showSv, setSv, showSatellite, setSatellite, mobile}}>\n        {showInfo && <Introduction {...{setInfo, showInfo}}/>}\n        {showSearch && <AddressSearch {...{ parcel, setParcel, setCoords, setSearch, showSearch }} />}\n      </Header>\n      <div id=\"sidebar\">\n      {showSv && (\n        <StreetView {...{ coords, width, height, setSvBearing, setSvCoords }} />\n        )}\n        {parcel && <Details {...{ parcel, setCoords, mobile }} />}\n      </div>\n      <SidebarFooter />\n      <div className=\"map-view\">\n      {((mobile && map) || !mobile) && (\n        <Map {...{ parcel, setParcel, width, coords, svCoords, svBearing, showSv, showSatellite }} />\n        )}\n\n      </div>\n    </div>\n  );\n};\n\nexport default ParcelExplorer;\n","import React, {} from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport Analytics from 'react-router-ga';\nimport ParcelExplorer from './ParcelExplorer';\n\nconst trackingId = 'UA-107915075-6'\n\nexport default function App() {\n  return (\n\n    <Router basename='/parcel-viewer'>\n          <Analytics id={trackingId} debug>\n\n        {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n        <Switch>\n          <Route path=\"/:pid\" children={<ParcelExplorer />} />\n          <Route path=\"/\">\n            <ParcelExplorer />\n          </Route>x\n        </Switch>\n        </Analytics>\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import \"./tailwind.output.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}